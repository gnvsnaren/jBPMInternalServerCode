<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_J8X6UKv3EeuCkaWMrBermw" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_inputPayloadItem" structureRef="com.Incident"/>
  <bpmn2:itemDefinition id="_solutionsItem" structureRef="com.Solutions"/>
  <bpmn2:itemDefinition id="_botResolveItem" structureRef="Integer"/>
  <bpmn2:itemDefinition id="_execution_outcomeItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_execution_outcome_arrayItem" structureRef="java.util.ArrayList"/>
  <bpmn2:itemDefinition id="_checkFlagItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_work_notesItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_decisionMessage1Item" structureRef="String"/>
  <bpmn2:itemDefinition id="_decisionMessage2Item" structureRef="String"/>
  <bpmn2:itemDefinition id="_solutionIdToPythonMappingItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_checkBotFlagItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_updateTicketPayloadItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_numberItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_sys_idItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_descItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_short_descriptionItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_processIdItem" structureRef="java.lang.Long"/>
  <bpmn2:itemDefinition id="_inputItem" structureRef="com.Solutions"/>
  <bpmn2:itemDefinition id="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_multiInstanceItemType_input" structureRef="com.Solutions"/>
  <bpmn2:process id="CIAP_SapOps.CIAP_Sapops_BusinessProcess_SingleApproval" drools:packageName="org.jbpm" drools:version="1.0" drools:adHoc="false" name="CIAP_Sapops_BusinessProcess_SingleApproval" isExecutable="true" processType="Public">
    <bpmn2:property id="inputPayload" itemSubjectRef="_inputPayloadItem" name="inputPayload"/>
    <bpmn2:property id="solutions" itemSubjectRef="_solutionsItem" name="solutions"/>
    <bpmn2:property id="botResolve" itemSubjectRef="_botResolveItem" name="botResolve"/>
    <bpmn2:property id="execution_outcome" itemSubjectRef="_execution_outcomeItem" name="execution_outcome"/>
    <bpmn2:property id="execution_outcome_array" itemSubjectRef="_execution_outcome_arrayItem" name="execution_outcome_array"/>
    <bpmn2:property id="checkFlag" itemSubjectRef="_checkFlagItem" name="checkFlag"/>
    <bpmn2:property id="work_notes" itemSubjectRef="_work_notesItem" name="work_notes"/>
    <bpmn2:property id="decisionMessage1" itemSubjectRef="_decisionMessage1Item" name="decisionMessage1"/>
    <bpmn2:property id="decisionMessage2" itemSubjectRef="_decisionMessage2Item" name="decisionMessage2"/>
    <bpmn2:property id="solutionIdToPythonMapping" itemSubjectRef="_solutionIdToPythonMappingItem" name="solutionIdToPythonMapping"/>
    <bpmn2:property id="checkBotFlag" itemSubjectRef="_checkBotFlagItem" name="checkBotFlag"/>
    <bpmn2:property id="updateTicketPayload" itemSubjectRef="_updateTicketPayloadItem" name="updateTicketPayload"/>
    <bpmn2:property id="number" itemSubjectRef="_numberItem" name="number"/>
    <bpmn2:property id="sys_id" itemSubjectRef="_sys_idItem" name="sys_id"/>
    <bpmn2:property id="desc" itemSubjectRef="_descItem" name="desc"/>
    <bpmn2:property id="short_description" itemSubjectRef="_short_descriptionItem" name="short_description"/>
    <bpmn2:property id="processId" itemSubjectRef="_processIdItem" name="processId"/>
    <bpmn2:property id="input" itemSubjectRef="_inputItem" name="input"/>
    <bpmn2:sequenceFlow id="_D4D247FE-3DB7-43B6-B599-31AABB4E05B8" sourceRef="_E72638F7-E2F5-411F-8B2D-B0FEDADDA937" targetRef="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD">
      <bpmn2:extensionElements>
        <drools:metaData name="isAutoConnection.target">
          <drools:metaValue><![CDATA[true]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
    </bpmn2:sequenceFlow>
    <bpmn2:startEvent id="_E72638F7-E2F5-411F-8B2D-B0FEDADDA937">
      <bpmn2:outgoing>_D4D247FE-3DB7-43B6-B599-31AABB4E05B8</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:subProcess id="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD" name=".
Multiple Instance Sub-process">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[.
Multiple Instance Sub-process]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.javascript.com/javascript">
          <drools:script><![CDATA[//System.out.println("Input:" + inputPayload);
//kcontext.setVariable("solutions",inputPayload.getSolutions());
//kcontext.setVariable("botResolve",1);
//kcontext.setVariable("execution_outcome","");

var pid = kcontext.getProcessInstance().getId();
kcontext.setVariable('processId',pid);
print("Input: " + inputPayload);
kcontext.setVariable('solutions',inputPayload.getSolutions());
kcontext.setVariable('botResolve',1);
kcontext.setVariable('execution_outcome','');

print("Inside SolutionIdToPythonMapping task");
var solutionIdToPythonMapping={};
solutionIdToPythonMapping["ZMM_CONF_CONTRL_KEY_CHECK"]="C://jbpm_project//SAP_OPs//CHECK_SAP_CONTROL_KEY//SAP_Check_Control_Key_Main.py";
solutionIdToPythonMapping["ZMM_CONF_CONTRL_KEY_RESOLVE"]="C://jbpm_project//SAP_OPs//RESOLVE_SAP_CONTROL_KEY//SAP_Resolve_Control_Key_Main.py";
solutionIdToPythonMapping["ZSD_DELIVERY_CHECK"]="C://jbpm_project//SAP_OPs//CHECK_SAP_DELIVERY//SAP_Check_Delivery_Main.py";
solutionIdToPythonMapping["ZSD_REMOVE_DEL_BLOCK_RESOLVE"]="C://jbpm_project//SAP_OPs//RESOLVE_SAP_DELIVERY//SAP_Resolve_Delivery_Main.py";
solutionIdToPythonMapping["ZSD_CREDIT_CHECK"]="C://jbpm_project//SAP_OPs//CHECK_SAP_CREDITBLOCK//SAP_Check_CreditBlock_Main.py";
solutionIdToPythonMapping["ZSD_REMOVE_CRDT_BLOCK_RESOLVE"]="C://jbpm_project//SAP_OPs//RESOLVE_SAP_CREDITBLOCK//SAP_Resolve_CreditBlock_Main.py";
solutionIdToPythonMapping["ZSD_SALESORDER_CHECK"]="C://jbpm_project//SAP_OPs//CHECK_SAP_SALES_ORDER//SAP_Check_Sales_Order_Main.py";
solutionIdToPythonMapping["ZSD_RESOLVE_SAP_SALES_ORDER"]="C://jbpm_project//SAP_OPs//RESOLVE_SAP_SALES_ORDER//SAP_Resolve_Sales_Order_Main.py";
solutionIdToPythonMapping["ZFI_WRONG_DUE_DATE_CHECK"]="C://jbpm_project//SAP_OPs//CHECK_SAP_WRONG_DUE_DATE//SAP_Check_Wrong_Due_Date_Main.py";
solutionIdToPythonMapping["ZFI_WRONG_DUE_DATE_RESOLVE"]="C://jbpm_project//SAP_OPs//RESOLVE_SAP_WRONG_DUE_DATE//SAP_Resolve_Wrong_Due_Date_Main.py";
print("The solutionIdToPythonMapping is: " + JSON.stringify(solutionIdToPythonMapping));
kcontext.setVariable('solutionIdToPythonMapping',JSON.stringify(solutionIdToPythonMapping));]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[System.out.println("Resolve Ticket Flag is: " + botResolve);
java.lang.Object object = kcontext.getVariable("execution_outcome_array");
byte[] bytes = object.toString().getBytes();
String execution_outcome_byte = javax.xml.bind.DatatypeConverter.printBase64Binary(bytes);
kcontext.setVariable("execution_outcome",execution_outcome_byte);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_D4D247FE-3DB7-43B6-B599-31AABB4E05B8</bpmn2:incoming>
      <bpmn2:ioSpecification id="_J8X6Uav3EeuCkaWMrBermw">
        <bpmn2:dataInput id="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_IN_COLLECTIONInputX" itemSubjectRef="_solutionsItem" name="IN_COLLECTION"/>
        <bpmn2:dataInput id="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_inputInputX" itemSubjectRef="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_multiInstanceItemType_input" name="input"/>
        <bpmn2:inputSet id="_J8X6Uqv3EeuCkaWMrBermw">
          <bpmn2:dataInputRefs>_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_IN_COLLECTIONInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_inputInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_J8X6U6v3EeuCkaWMrBermw"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_J8X6VKv3EeuCkaWMrBermw">
        <bpmn2:sourceRef>solutions</bpmn2:sourceRef>
        <bpmn2:targetRef>_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_IN_COLLECTIONInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:multiInstanceLoopCharacteristics id="_J8X6Vav3EeuCkaWMrBermw" isSequential="true">
        <bpmn2:loopDataInputRef>_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_IN_COLLECTIONInputX</bpmn2:loopDataInputRef>
        <bpmn2:inputDataItem xsi:type="bpmn2:tDataInput" id="input" itemSubjectRef="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD_multiInstanceItemType_input" name="input"/>
      </bpmn2:multiInstanceLoopCharacteristics>
      <bpmn2:sequenceFlow id="_08DC7D14-6E80-4CDB-AB10-434BE1C3C6D0" sourceRef="_F07595F9-FF00-4CA8-9C88-AFB09369AF9E" targetRef="_47202C74-1CAD-4AFC-8A5A-24252B04CFB4">
        <bpmn2:extensionElements>
          <drools:metaData name="isAutoConnection.source">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
          <drools:metaData name="isAutoConnection.target">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
      </bpmn2:sequenceFlow>
      <bpmn2:sequenceFlow id="_E1BCABC6-5189-46C1-8AB9-291BDA2F0656" sourceRef="_E4B09856-3500-4A9B-BB84-A20563CF51FF" targetRef="_F07595F9-FF00-4CA8-9C88-AFB09369AF9E">
        <bpmn2:extensionElements>
          <drools:metaData name="isAutoConnection.target">
            <drools:metaValue><![CDATA[true]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
      </bpmn2:sequenceFlow>
      <bpmn2:callActivity id="_F07595F9-FF00-4CA8-9C88-AFB09369AF9E" drools:independent="false" drools:waitForCompletion="true" name="Sub-process" calledElement="">
        <bpmn2:extensionElements>
          <drools:metaData name="elementname">
            <drools:metaValue><![CDATA[Sub-process]]></drools:metaValue>
          </drools:metaData>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_E1BCABC6-5189-46C1-8AB9-291BDA2F0656</bpmn2:incoming>
        <bpmn2:outgoing>_08DC7D14-6E80-4CDB-AB10-434BE1C3C6D0</bpmn2:outgoing>
      </bpmn2:callActivity>
      <bpmn2:endEvent id="_47202C74-1CAD-4AFC-8A5A-24252B04CFB4">
        <bpmn2:incoming>_08DC7D14-6E80-4CDB-AB10-434BE1C3C6D0</bpmn2:incoming>
      </bpmn2:endEvent>
      <bpmn2:startEvent id="_E4B09856-3500-4A9B-BB84-A20563CF51FF">
        <bpmn2:outgoing>_E1BCABC6-5189-46C1-8AB9-291BDA2F0656</bpmn2:outgoing>
      </bpmn2:startEvent>
    </bpmn2:subProcess>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_J8X6Vqv3EeuCkaWMrBermw">
    <bpmndi:BPMNPlane id="_J8X6V6v3EeuCkaWMrBermw" bpmnElement="CIAP_SapOps.CIAP_Sapops_BusinessProcess_SingleApproval">
      <bpmndi:BPMNShape id="shape__DDF14B26-B05E-43DA-81FF-02D6013B0BCD" bpmnElement="_DDF14B26-B05E-43DA-81FF-02D6013B0BCD">
        <dc:Bounds height="229.0" width="525.0" x="272.0" y="72.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__E4B09856-3500-4A9B-BB84-A20563CF51FF" bpmnElement="_E4B09856-3500-4A9B-BB84-A20563CF51FF">
        <dc:Bounds height="56.0" width="56.0" x="309.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__F07595F9-FF00-4CA8-9C88-AFB09369AF9E_to_shape__47202C74-1CAD-4AFC-8A5A-24252B04CFB4" bpmnElement="_08DC7D14-6E80-4CDB-AB10-434BE1C3C6D0">
        <di:waypoint xsi:type="dc:Point" x="614.5" y="187.5"/>
        <di:waypoint xsi:type="dc:Point" x="710.0" y="187.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__E4B09856-3500-4A9B-BB84-A20563CF51FF_to_shape__F07595F9-FF00-4CA8-9C88-AFB09369AF9E" bpmnElement="_E1BCABC6-5189-46C1-8AB9-291BDA2F0656">
        <di:waypoint xsi:type="dc:Point" x="337.0" y="188.0"/>
        <di:waypoint xsi:type="dc:Point" x="461.5" y="187.5"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape__47202C74-1CAD-4AFC-8A5A-24252B04CFB4" bpmnElement="_47202C74-1CAD-4AFC-8A5A-24252B04CFB4">
        <dc:Bounds height="56.0" width="56.0" x="710.0" y="159.5"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__F07595F9-FF00-4CA8-9C88-AFB09369AF9E" bpmnElement="_F07595F9-FF00-4CA8-9C88-AFB09369AF9E">
        <dc:Bounds height="101.0" width="153.0" x="461.5" y="137.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__E72638F7-E2F5-411F-8B2D-B0FEDADDA937" bpmnElement="_E72638F7-E2F5-411F-8B2D-B0FEDADDA937">
        <dc:Bounds height="56.0" width="56.0" x="113.0" y="160.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__E72638F7-E2F5-411F-8B2D-B0FEDADDA937_to_shape__DDF14B26-B05E-43DA-81FF-02D6013B0BCD" bpmnElement="_D4D247FE-3DB7-43B6-B599-31AABB4E05B8">
        <di:waypoint xsi:type="dc:Point" x="141.0" y="188.0"/>
        <di:waypoint xsi:type="dc:Point" x="272.0" y="186.5"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_J8X6WKv3EeuCkaWMrBermw" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_E72638F7-E2F5-411F-8B2D-B0FEDADDA937" id="_J8X6Wav3EeuCkaWMrBermw">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_J8X6UKv3EeuCkaWMrBermw</bpmn2:source>
    <bpmn2:target>_J8X6UKv3EeuCkaWMrBermw</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
